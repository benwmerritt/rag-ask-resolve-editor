---
title: "Stroke List"
source: "DaVinci Resolve User Manual"
doc_type: "manual"
chapter: 577
---

# Stroke List

Once you start drawing strokes to identify features for mask generation, they appear in this Stroke list.

�Stroke list header: The header, at the left of the Stroke list, has controls for selecting,

enabling/disabling, and naming each stroke (if you need that level of organization). Right-clicking

any stroke in its header reveals controls to Reset Tracking Data and change the mask type

(feature or not feature).

In Object mode, this is just a flat list of strokes, each of which help to either define the object you

want to isolate, or the background.

In Person mode, this is just a flat list of strokes, each of which help to either define the person you

want to isolate, or the background.

In Features mode, an additional drop-down menu lets you choose which specific feature you

want to identify with a guidance stroke. All strokes are sorted hierarchically by the feature they

correspond to, so for example each Face stroke appears underneath a Face title bar. The title bar

for each feature has a toggle control that lets you turn that feature off and on. When off, you

disable that feature’s contribution to the overall mask being generated.

�Stroke timeline area: A Timeline ruler shows the duration of the current clip you’re creating a mask

for. Each stroke in this list has a track that displays how many frames of each stroke have been

tracked. As you track each stroke, these tracks fill up with colored bars to show which frames have

tracking data.

Tracks of strokes that identify a person or object are blue, while tracks for strokes identifying

things that aren’t the feature are red. Using this timeline, you can keep track of which strokes need

to be tracked, and manipulate the tracking data as necessary to obtain a useful result.


Color | Chapter 139 Magic Mask

COLOR

Mask Adjustment Controls and Matte Finesse

There are two sets of controls for refining the mask that’s output by the Magic Mask palette. The first

set of controls, at top, let you adjust how the mask is generated based on the analysis data, which lets

you refine the mask result based on characteristics of the image. These include:

�Quality: Two options let you choose a tradeoff between quality and performance. Faster lets you

generate a lower quality mask more quickly, that’s suitable for garbage matting. Better generates a

higher quality mask with more detail, that’s more processor-intensive.

�Smart Refine (Person Mode): This control lets you expand or contract the resulting mask based

on the analysis of the image, such that expanding the mask doesn’t expand it deeply into

surrounding parts of the image that aren’t connected to that person. This operation does not

introduce softness. Instead, it enlarges or shrinks the overall mask generated by this palette. 0.5 is

unity, 0 is the maximum amount of expansion, while 1 is the maximum amount of contraction.

�Refine Range (Object Mode): This control lets you adjust the sensitivity of the resulting mask

based on the analysis of the image. This lets you fine tune the mask to encompass more or less of

the selected object. 30 is unity, 100 is the maximum amount of sensitivity, while 1 is the minimum

amount of sensitivity.

A second set of mask manipulation controls are for manipulating the mask after it’s been generated.

Most of these are the same Matte Finesse controls that are available in the Qualifier palette, which are

useful for trying to fix issues with problem masks, or soften the edges when you need to have a more

feathered result.

For more information about the Matte Finesse controls, see Chapter 135, “Secondary

Qualifiers.”

There is one additional control, however, that’s unique to the Magic Mask palette.

Consistency: After you’ve tracked each stroke to follow the subject over the duration of the

clip, this setting lets you choose how much temporal smoothing is necessary to ameliorate

jitter in the edges of the resulting mask in areas of low confidence, such as frizzy hair or

translucent clothing. Higher settings apply more smoothing to the edges of the mask but are

more processor intensive and may affect how closely the mask follows motion in the image.

Lower settings will be faster and more accurate but may allow more edge jitter in the resulting

mask, which can be distracting in the final adjustment you’re making. This parameter defaults

to 0, so your first application of Magic Mask will always begin with the most accurate (and

potentially most active) application of this feature’s analysis.

IMPORTANT: Consistency requires a stroke to have a duration of at least a few frames in

order to function correctly. This requires you to track each stroke to follow the motion of the

camera and subject in order to extend the duration of each stroke. Because Consistency

is trying to eliminate one or two frame “noise” in the shape of the mask, strokes of short

duration may end up having their effect eliminated.


Color | Chapter 139 Magic Mask

COLOR

Choosing What to Isolate

This section elaborates on the different choices that are available for isolation and offers tips for what

each choice is good for.

Object Mode

Object mode is the easiest choice to make. Essentially, use this mode for any subject that is not a

person. Subjects like cars, pets, and food are all good candidates for Object mode. The notable

exception to this rule are items of clothing like shirts, hats etc. that are being worn by a human. Worn

clothing is much better isolated in Person mode instead.

Drawing positive strokes in Object mode will select areas of similar contrast and color, allowing you to

link complex shapes together. Generally you will need more strokes to actively define an object than a

person, due to the greater variety of the shapes involved.

Drawing negative strokes in Object mode removes areas from the object that you don’t want to isolate.

This can be something simple like removing the wheels of a car from a mask, or more complicated like

removing specific books from a mask of a bookshelf.

Person Mode

When you choose Person, every stroke you draw over someone helps to isolate that person’s entire

body, or however much of that person is visible onscreen. This includes all clothes that person

is wearing, including their shirt, pants, shorts, dress or skirt, bathing suit, knickers, jumpsuits, hat,

shoes, even armor or space suit (yes, we’ve tested both), whatever. Most clothing should be correctly

identified as part of the isolation mask you’re creating. However, excessively flowing garments may

need an extra stroke or two to identify them in complex visual compositions.

Drawing negative strokes, when in Person mode, will identify everything that’s not the person you’re

isolating; this omits both the background and/or other people from the mask being generated.

Drawing negative strokes isn’t mandatory; you only need to draw a negative stroke if you see a

problem such as part of the background being included in the isolation mask.

Features Mode

When you choose Features, a drop-down menu appears at the top of the Stroke list. You must first

choose the feature you want to isolate from this menu, and then draw strokes over the selected

feature (face, hair, etc.) you want to isolate. Each feature’s collection of strokes can be turned on or off

to add that feature to the overall mask being created.

�Face: Isolates just the face and ears, including eyes and glasses. This omits hair and the neck

(which is considered part of the torso). Facial hair, particularly bigger beards, will usually be

omitted from an initial stroke made on exposed skin of the face, so you can work on just the skin if

you want. However, an additional stroke on the beard will include it in the face isolation.

�Hair: Isolates just the hair, stopping at the bangs and ears, and omitting as much of the face as

possible. Curly, frizzy, or wispy hair will produce oversized masks encompassing as much of the

hair detail as possible. This tool does not create fine transparency. Fine and irregular hair detail

can cause jittery edges, but this can be ameliorated using the Consistency control.

�Torso (Exposed Skin): Isolates exposed skin above the waist and below the face, excluding the

arms. This is the selection you want to enable if you want to isolate the neck, neckline, and any

part of the chest that’s exposed when wearing v-necks, plunge necks, tank tops, crop tops, or

bikini tops.


Color | Chapter 139 Magic Mask

COLOR

�Clothing (Top): Any clothing above the waist. Exposed skin is omitted.

�Clothing (Bottom): Any clothing below the waist. Exposed skin is omitted.

�Arms (Exposed Skin): The exposed parts of arms or hands. Shirt and dress sleeves are omitted,

as are sun sleeves.

�Shoes: Most styles of shoes will be isolated.

�Legs (Exposed Skin): Isolates exposed skin below the torso, excluding socks and leggings.

�Hat: Most styles of hats will be isolated, although thin accessories such as streaming ribbons or

feathers might not be included.

Remember, no matter what feature you’ve selected to isolate, you can always draw negative strokes to

omit other parts of the person or their clothing that are erroneously being included in the mask.

IMPORTANT: When you’re drawing strokes in Features mode, accidentally drawing a stroke

over a feature other than the one that’s selected in the drop-down menu at the top of the

Stroke list will result in a completely incorrect mask. If you see this happen, delete the stroke

you just made, double-check which feature is currently selected, and either redo the stroke

or choose the correct feature you want to isolate.

Identifying More Than One Person

In both Person and Feature mode, you can add strokes to identify more than one person, or more than

one person’s features. There’s nothing special you need to do, simply draw strokes over each person

you want to isolate, or over the same feature of each person you want to include (for example, drawing

stroke over three people’s faces in Face mode).

You can draw strokes over multiple people to isolate them together in the same mask.


Color | Chapter 139 Magic Mask

COLOR

Using Matte Finesse Controls

There are plenty of situations where a seemingly problematic mask can be improved using the Smart

Refine and Matte Finesse controls at the right of the Magic Mask palette. If the mask is only a few

pixels off, and the color adjustment you want to make is reasonably subtle, you can probably use

Blur Radius and In/Out Ratio to create a soft edge that falls off just at the outer edge of the subject

(so as not to create a halo effect) with which to make your adjustment.

(Top) The hard edges of the initial mask aren’t quite close enough to the edges of the woman’s

arm to make a subtle adjustment, (Bottom) Using the Blur Radius and In/Out Ratio controls

to create soft edges that don’t extend past the subject to make a useful mask

Using Magic Mask as a Garbage Matte

In situations where the outer edge of a person is not being detected closely enough for Magic Mask

to give a useful result for a more extreme color adjustment, you’re probably better off expanding

the result into a closely-fitting garbage matte to use for isolating the person or features using

other techniques, such as a keyer in the Qualifier palette. Even for this purpose, you’ll find using


Color | Chapter 139 Magic Mask

COLOR

Magic Mask is typically faster than rotoscoping a relatively close garbage matte over a moving figure

using windows.

(Top) The initial mask isn’t quite close enough to the edges to make an extreme

adjustment, (Bottom) Using the Mode/Shape/Radius/Iterations/Blur Radius controls

to expand the matte to be a garbage matte for use with other keys