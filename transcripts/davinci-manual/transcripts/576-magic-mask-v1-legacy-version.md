---
title: "Magic Mask v1 (Legacy Version)"
source: "DaVinci Resolve User Manual"
doc_type: "manual"
chapter: 576
---

# Magic Mask v1 (Legacy Version)

NOTE: The original Magic Mask v1 has been superseded by Magic Mask v2 as described

above. However the v1 Magic Mask is still accessible for legacy projects, and described

below. To enable it select “Legacy Object Mask” from the Magic Mask 2 options menu.

The Magic Mask palette uses the DaVinci Neural Engine to automagically create a mask to isolate one

or more people or object in the frame, guided by user-applied paint strokes to identify the subject for

isolation. Masks can be generated for either an entire object, person, or for specific features of that

person (their face, hair, arms, shoes, etc.). The following images show these two kinds of masks with

Highlight enabled in the Viewer. A red onionskin overlay lets you see what Magic Mask is isolating.

(Left) Using Magic Mask to isolate an entire person, (Right) Using Magic Mask to isolate someone’s face

Once the Magic Mask palette has generated a mask, Matte Finesse controls let you adjust the mask’s

size and feathering. This lets you deal with difficult edges that might tip your hand depending on the

kind of adjustment you’re trying to make.

While the masks generated by Magic Mask can often be good enough to use directly for making high

quality isolated adjustments, it won’t always give perfect results. Keep in mind that Magic Mask is as

much for the fast creation of detailed garbage masks as it is for doing direct isolation.

In these cases, the Matte Finesse controls let you make the resulting mask softer and looser as

necessary to clear the edge of a difficult subject you’re isolating with the help of another mask

generation technique, such as a Qualifier key or window. When you use the Magic Mask palette

within the same node in which you’re also creating a key in the Secondary palette, or a window in the

Window palette, the key or window and Magic Mask are combined to output a boolean intersection.

This means the isolation is limited to areas where both kinds of masks overlap one another.

(Left) Using Magic Mask to create a mask, (Right) Combining the Magic Mask with a

circular window, the resulting mask is an intersection of the two


Color | Chapter 139 Magic Mask

COLOR

Objects can also be isolated by Magic Mask, allowing you to create complicated masks of complex

shapes that may be difficult to isolate with other tools. For example, using the Magic Mask in Object

mode to modify only the wood grain section of this guitar.

(Left) Multiple strokes in Object mode isolating the wood grain of the guitar, while ignoring

the musician’s arm, (Right) The finished shot, with a warmer wood grain

If you’re isolating specific features of a person, you can also mix and match what you’re isolating

to create exactly the type of mask you require. For example, you might isolate the face, along

with exposed skin on the torso, arms, and legs, to create a mask for creating an overall skin tone

adjustment that doesn’t include the subject’s hair or clothes.

(Left) Using Magic Mask to isolate a face, (Right) Using Magic Mask to isolate all exposed skin

As described earlier, this whole process is guided by strokes you draw to identify the subject. In a

typical workflow, you’ll draw short positive strokes (colored blue) over the person or feature you want

to isolate. Then, if necessary, you can also paint short subtractive strokes (colored red) over parts of

the image that are not the person or feature you’re isolating, to correct any problems you see in the

generated mask.

Blue strokes identify a person or feature

to isolate, while red strokes identify things

that shouldn’t be included in the mask.


Color | Chapter 139 Magic Mask

COLOR

Ideally, both positive and subtractive guidance strokes should be relatively short, and centered on the

part of the person or object you’re trying to add to the mask. Stroke position is usually more important

than stroke length, and in fact if you don’t like the result you’re getting in the mask with a particular

stroke you’ve drawn, you can drag it to another position without redrawing it; strokes are live and can

be selected using the pointer to move or delete them.

Selecting a stroke with the pointer;

selected strokes become highlighted.

Very long paint strokes aren’t usually that useful, and can be counterproductive later on when you’re

trying to track strokes to follow motion in the clip. This is particularly true if a stroke needs to follow

something that’s changing shape as it moves, like an arm. Furthermore, while you can make as many

strokes as you like, fewer strokes work better than many strokes, and as a general rule you shouldn’t

use more than five strokes to isolate a particular person or feature (nor should you need to).

As you work, each stroke shows up in the Stroke list, which lets you select, enable/disable, delete, and

otherwise manage the different strokes you create to guide automatic mask generation.

(Left) Multiple strokes in Features mode isolating exposed skin,

(Right) The Stroke list keeps track of all strokes you’ve made.

But what about camera and/or subject motion, you ask? After you’ve painted one or more strokes to

guide the analysis, you can motion track these strokes to follow the subject throughout that shot using

the stroke tracking controls within this palette. If you’ve made multiple strokes, they’re all tracked at

once, and each stroke automatically follows along with whatever image details immediately surround

that stroke, so there’s no setup necessary. You simply draw one or more strokes, then click the track

forward or backward button. When you track a stroke, the tracking bar for that stroke in the Stroke list

shows you which frames have been tracked (tracked frames are blue).


Color | Chapter 139 Magic Mask

COLOR

Controls let you track all mask analysis strokes forward and backward through the shot.

Once you’ve added the strokes that are necessary to isolate the subject, and you’ve motion tracked

them to follow along with the motion of the shot, a mask is automatically generated live for each frame

of the shot. This is important to know because any change you make, adding or removing strokes or

moving them manually, will alter the resulting mask on the fly.

What Magic Mask

Is Good For, and What It’s Not

Keep in mind that the Magic Mask tool does not specialize in soft translucent mask edges, such as

those created by the HSL, Luma, or 3D Keyers (when they’re used carefully). On the other hand, it

excels at creating form-fitting masks that isolate human features in situations where a typical keyer

does poorly. For example, Magic Mask can isolate exposed skin in shots where that person is standing

in front of a background with wood, stone, or soil that inhabits the same ranges of color as that person.

It can isolate beige clothes against a beige background. It can even isolate a person within a black and

white clip.

Once you’ve drawn one or more strokes to isolate a mask, a variety of controls let you adjust the

resulting mask to better fit the subject, if necessary. Depending on the adjustment you’re making

to the subject at hand, you may find that the keys generated using Magic Mask are sufficient to

convincingly isolate the person you’re grading, particularly if you’re working in Better mode.

However, real world projects pose plenty of unexpected challenges. Keep in mind that, depending

on what you’re trying to do, the resulting automated mask isn’t always going to be perfect enough to

replace precise rotoscoping for intensive secondary color adjustments. However, it’s been designed

to easily create tight-fitting garbage masks to use in conjunction with secondary keys or windows, with

which to exclude the background around a difficult-to-isolate subject.

If you’re using Magic Mask to create a garbage mask, keep in mind that the Faster mode has been

optimized to create looser masks more quickly for situations where you’ll be using it in conjunction

with a keyer or window to isolate a specific area for special grading.

TIP: The Magic Mask palette can even isolate people in photos and paintings. However,

figurative representations must have a minimal level of shadow rendering and anatomical

detail for a figure or feature to be recognized. For this reason, cartoony or abstract

representations won’t isolate very well.


Color | Chapter 139 Magic Mask

COLOR

The Magic Mask Interface

The Magic Mask palette is divided into three sets of controls: the Toolbar, the Stroke list, and the Mask

Finesse panel. When you first open the Magic Mask palette, it’s empty, and you’re told to draw a stroke

in the Viewer to create a mask.

The controls of the Magic Mask palette in Object mode

Magic Mask Toolbar

A toolbar at the top contains most of the interactive controls of the Magic Mask palette.

Object Mode: Selecting this icon puts the Magic Mask tool into Object mode for isolating subjects that

are not people.

Person Mode: Selecting this icon puts the Magic Mask tool into Person mode for isolating people and

parts of people. A tab control at the left lets you choose the type of mask you want created. There are

two choices:

�Person: For creating a mask to isolate as much of a person is visible, given the framing of the shot.

�Features: For creating a mask isolating just someone’s face, or hair, or arms, for example. In

Features mode, you can also combine multiple specific features into a single mask.

Tracking Controls: The following controls let you track all available strokes to follow camera or subject

motion in the frame. From left to right, these include:

�Go To Reference Frame: Moves the playhead to the frame on which you initially drew the strokes.

�Go To First Frame of Tracked Area: Moves the playhead to the first tracked frame of a range

of tracked frames, in preparation for tracking backwards if there are untracked frames at the

beginning of the clip.

�Track One Frame Backwards: Tracks one frame backwards and stops. Useful if you’re tracking

frame by frame to watch the progress of a particularly complicated bit of motion. If something goes

wrong, you can back up to the last frame where the stroke was able to properly track the subject,

and drag the stroke to a better location using the pointer to make it follow the subject properly.

If necessary, you can go a frame at a time, dragging the stroke to a better position every time it

fails to follow the feature you’re using it to isolate.

�Track All Frames Backwards: Continuously tracks from the current frame all the way to the

beginning of the clip.


Color | Chapter 139 Magic Mask

COLOR

�Stop Tracking: Stops tracking, in cases where there’s a problem with the track and

you want to make a change.

�Track Forwards and Backwards: Tracks from the current frame all the way to the end of the clip,

then returns to the original tracking point and tracks backwards to the beginning of the clip.

�Track All Frames Forwards: Continuously tracks from the current frame all the way

to the end of the clip.

�Track One Frame Forwards: Tracks one frame forward and stops. Useful if you’re tracking frame

by frame to watch the progress of a particularly complicated bit of motion. If necessary, you can

go a frame at a time, dragging the stroke to a better position every time it fails to follow the feature

you’re using it to isolate.

�Go To Last Frame of Tracked Area: Moves the playhead to the last tracked frame of a range

of tracked frames in preparation for tracking forwards if there are untracked frames at the end

of the clip.

Stroke tools: Two tools at the right let you choose whether to draw strokes to identify the feature you

want to isolate or identify things that aren’t the feature in order to eliminate unwanted excursions in

the resulting mask. The plus eyedropper adds an area to the mask; the minus eyedropper removes an

area from the mask.

Invert Mask: A button lets you invert the resulting mask in cases where you want to use the feature

analysis of this palette to isolate everything except the feature or features being analyzed.

Mask Overlay: Turns on an onion-skinned overlay with which to see what parts of the image are being

masked alongside which aren’t, so you can continue to refine the result by adding, moving, or deleting

strokes. The isolated part of the mask is tinted translucent red.