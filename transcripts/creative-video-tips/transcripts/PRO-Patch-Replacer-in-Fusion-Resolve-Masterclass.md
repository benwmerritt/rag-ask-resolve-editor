---
title: "PRO Patch Replacer in Fusion (Resolve Masterclass)"
video_id: 6sUD8udSLYg
channel: CreativeVideoTips
url: https://youtube.com/watch?v=6sUD8udSLYg
duration_seconds: 1530.0
date_processed: 2025-11-03
---

## Transcript
The patch replacer tool is actually one of my favorite object removal tools now that I've discovered new ways to use it inside of DaVinci Resolve Fusion. Because of this mode that it has called blended clone, not just regular clone, those edges just don't blend good. The textures don't blend. It sticks out like a sore thumb. And you can draw any custom shape to patch pixels. Chapters today cover VFX linear workflow, a performance crop trick, and most importantly, how to use the patch replacer tool with a custom shape to professionally remove a badge off this taxi using stabilized planar tracking. Download the footage to practice and follow along by going to creativevideotips.com and joining the cutting club for this free YouTube masterclass. This is the footage we're working with. It's Sony S-Log 3 footage, and we're going to do color management just in Fusion today with a couple nodes. So let's get into Fusion. Just make sure your play is parked over the clip on a timeline. It's the best way to work with it because of your native resolution and you get timecode. So I click the Fusion button. I'm in here. I just like to work with one viewer at a time. So I'm selecting the viewport that I want to use, choosing the single viewer over here and the tool to get this into linear space for color management and keep it in the same gamut of colors. It's just I'm going to hit SHIFT SPACE and type CIN for the Cineon Log tool. And with that loaded into the viewer, we just make a couple of changes. We're going to go to the Inspector, Log to Lynn. That's what we want from Log space to Linear space. But the log type is set to Cineon as a default. I'm going to change that down here to we'll go down here to Sony S-Log. And I'm going to choose S-Log 3. And in fact, because this is a camera that I use a lot, I'm going to make this a default. And the way you can make a default of settings for stuff like this in DaVinci Resolve Fusion, you just right click on the word where it says the tool up here, where it says Cineon Log. So I'm right clicking there, going down to settings and I'll say Save default. Now, anytime I add a new Cineon Log tool, it's going to be set up for Sony S-Log 3. Just a little extra tip there. Now, the viewer, the viewport over here is not displaying this correctly for us. So the other thing we have to do when we work in linear is make sure our gamut viewlet is properly displaying this for us for like an sRGB monitor, which is what I'm using. So up here in the upper right of the viewport is our viewlet. And I'm going to hit the little carrot drop down next to it and change it to gamut view instead. And with this enabled, I'm going to also click it one more time and say edit because this is where you can actually change and set up settings for it to make sure the colors are represented properly on your screen for view. This isn't baking anything in, it's just for viewing. So the source space is going to be S-Gamut 3 Cine, coming down here to Sony S-Gamut 3.Cine. This guy right here, not this one. This is the one that most of the FX3, FX30 that I use a lot, utilize. And then the output space is sRGB, add gamma, yes. And again, this is one of those things you can right click on here and say settings, save as a default. And then you can also right click anywhere in the viewer over here and say settings, save defaults. So this way this will be set up the next time you come in here. Now to invert this and restore it back to the log footage at the end of your color managed pipeline to go back to the edit page, it's real simple. You just take this note here, command C, command V, put this right before your media out. Think of this as your ODT if you're used to the color page. We'll just come over here to mode and change instead of saying log to Lynn, we say Lynn to log and that just restores it so that when we come back over here, it's like we've done nothing. You can test that always if you click this button up here, which basically disables your grades and all that. If you do that and it's shifties the shortcut and there's no change, you've effectively not altered the image at all, which is what we want. The crop trick. Now here's the deal. This footage here is UHD 3840 by 2160 and I know that's not huge, but there is 12k footage out there nowadays and I'm all about working as fast as possible getting the best performance real time playback. And this is what this will help do because effectively I just want to work on a small section of this frame here and the crop tool is going to effectively cut away our pixels. So we're working on a small subset of pixels and we'll paste that back on top with a merge. So essentially you're working at a low resolution but still haven't lost any quality because it gets put back together. So the way it gets set up is after our Cineon log tool, I'm going to add a shift space crop tool CRP is the little shortcut to it. And the way this tool works, once it's selected down here in the upper left of your viewport, you'll get this little icon and this is going to allow you to make a box selection. So I'm going to click that and the idea is I just need to make a box selection around a section that I'm going to be cloning from and the area I'm going to be cleaning up and that's all I need to include. So I might just click and drag somewhere around here because I might want to use some of the yellow of the side of the car. I probably won't need the tire but I'll just come over a little bit to the edge and do something right around there. Let's say that's what I want. I'll load the crop tool into the viewer and you can see as I'm looking at the results of the crop. We've actually cut the resolution down to 1331 by 872. So much smaller, it's a lot easier on the computer to work with. At the end of the flow though we have to reverse this as well just like we reversed the Cineon log tool. So this is kind of like a crop sandwich is what I would call it. And the way we do that is we'll take a copy of it so command C, command V, and we'll paste that afterwards and we're basically going to make a little hole here for our patchwork to live. Now on the second crop tool to restore this to 3840 by 2060, it's pretty simple but there's no like invert button like the Cineon log tool. So on the crop tool we come to the X and Y size and that's where we set the resolution. So over here I'm going to change this to 3840. I'm just punching it in manually. And then the other thing is the offsets are not correct. So if you take a look at the results of being put back out to 3840, 2060, it's down here in the corner. All we need to do is put negative numbers in front of the offsets here for X and Y. So if you come up here we'll put a negative number for 862. I'm going to tab down to the next one, negative number there. And this just placed those pixels exactly, you can see exactly back in the same location that they were when we had them here. Plainter tracker. Obviously this badge right here is moving. That means the patch is going to need to move. The planer tracker is going to help us out with that. The computer is going to figure out the motion for us. But we just need to set it up. After the crop node I'm going to hit shift space, P, T, R, A to load the planer tracker into the flow right after. I'm going to pick and flick so just dragging loads this up into our viewer. You'll see the results of it right up there. And I'm going to go to the reference frame where basically the corners are pinned to draw out a shape. So I'm going to do this all on frame zero. So if you're on any other frame I suggest going to frame zero to start. So we're all on the same page. Now the other thing I'll point out, as I said a keyboard customization to get a nice larger view here. So basically what I'm going to do is I'm going to turn off my node view up at the top by hitting the Q button, which is a nice little shortcut you can set up in keyboard customization. That's your nodes in the fusion view. So that when I draw around this I can just see it nice and big. To work with the planer tracker you just click and draw a shape. Just a good old polygon. And the idea is when you do this, shift O closes it up like any other polygon. Just make sure you're not drawing your shape accidentally over some pixels that are not part of the main surface you're trying to track. Like you wouldn't put over the tire in this instance. This should give us a good result. The other thing to know when we do that you'll want to make sure you click to set your reference time. Now it's already set to be frame zero. But if it was on a different frame for a different shot that's where you set that first. We'll use the plain old point tracker motion type. I'm going to change this to translation, rotation and scale. Essentially these go from complex motion to less complex motion as you go up. And what I found is perspective is usually more data than you need most of the time. And it gives you bad results if it doesn't find the perspective. So I'll choose translation, rotation, scale and to track forward. We've got this nice little button right here. And we'll just let it rip. There we go. 37, 38 frames tracked just like that. We don't know if the tracking data is any good though. So this is thing that's often missed. Check your track, especially with a planar tracker. We need to go into the mode called steady. We're going to be in steady mode anyway. So let's go ahead and get there. I'm going to move playhead to frame zero. Operation mode from track now goes to steady. And steady also has a reference frame. And again, it's also defaults to frame zero. But if you want it to be a different frame for whatever reason, meaning your corners are pinned to at that frame, you just hit set when you're on that specific frame. If I want it to be at this frame, you'll see if I hit set here, that just pinned my corners out at that frame. But again, we're just doing it at zero. So I'll leave it at zero. Just want you to know how that works. And the idea with it set to steady is it locks off the area that was tracked. And it does sort of an inverse transform. So the way you check the track is you leave your cursor on some point and you observe the pixels underneath the cursor as you lift your hand off of the computer. I'll hit the spacebar to play around. And if that doesn't move, which it does not move the area that I tracked, that means it's a solid track. If it does move, we need to go back and fix it. But for simplicity and move this tutorial along, we're moving on. This is good enough. Essentially what we have here is a still image that we can do the cleanup on with the patch replacer. But it has lots of benefits because it'll take on lighting changes that happen on almost everything, as well as things like grain. Patch Replacer. Hopefully the reason you came to this tutorial, let's add that next. So after the planar tracker, we'll add shift space, patch replacer. And the basics of patch replacer are simple enough to understand. If I load this up here into the viewer, you'll see there's a sore side and sort of a destination side. And by default, you'll see you've got like a circle ellipse over here in the inspector. You've also got a rectangle, which do a pretty good job. You can change the size of these if I play through because we've stabilized the image. It's done a nice job. But where you can get a little bit more detail than fancy with this is if you want to affect less pixels and just really clean up the part that you need, is you can actually draw a custom shape and use the region shape mode over here that's called alpha channel instead. But the way you set this up is not obvious. So what you actually want to do, we'll go ahead and change that to alpha channel because that's what we're going to end up using. What we need to do, you can see things went haywire. You don't actually plug a mask into the patch replacer tool itself. What you do is you add a mask before as an unpre-multiply mask that feeds into the yellow background of patch replacer. So I'm going to give myself a little bit more space here to work. And to add a mask to this, I'm going to look at the result of the planar tracker that's stabilized. Again, the stabilize was set with operation mode to study. I'm going to add a matte control right after it. So shift space, matte control. In fact, you can just grab it off the toolbar however you like to get your nodes. I'm going to draw this on frame zero, although really it doesn't matter because this is all stabilized. I'm going to grab a B-spline tool to draw a shape just around this brawn ability. Now it's important you're looking at this resolution here, 1331, 872. And I grab a B-spline tool from my toolbar. That's this guy right here. Now if you come in here, you can come in closely and just click and make points. The nice thing about B-splines is they're curved by default. So they'll more organically sort of blend. So if I hit shift O, that's a quick little shortcut to close it up. If you want to disable the animation that's built into the B-spline by default, if you're not in things like multi-poly, come over to the inspector and right click where it says for shape animation and say remove B-spline one, polyline. And that way if you make changes on another frame, it doesn't actually do the interpolation when you didn't mean to. If you're adjusting the shape, which happens a lot. So the other thing to know now is now that we've got that shape set up, we just plug this into the matte control. Where do we plug it into the matte control? Well, we want to go into this green foreground input. And sometimes it's a little tricky to go into the right spot. You'll see if I stick this into here right away, it wants to go into the blue input because it's a mask. Instead I want this to go into the green input. So a little trick is sometimes you actually grab the green part first and then go to the output. And then it loads it up here into the viewer. Now there's a problem. And the issue is that I'm working inside this cropped version of the image, but my original footage is actually 3840x2160. So when I drew this spline, this spline is actually drawn on 3840x2160. But you can modify and explicitly say what resolution this mask was drawn at. And that's what we're going to do to fix this. So if we take a look at our planar tracker resolution, we're going to leave that up on frame right here. I'll go click on the B spline tool to set the resolution for this. Go to the inspector, image tab, output size, custom, uncheck where it says frame format settings. Because now this will allow me to set my very specific width and height that I want that mask to have been drawn on. Which is the one you should have been looking at. So I just double click to change it 1331, tab down to say 872, return. And now if we take a look at the matte control, still nothing. And the reason why is because on the matte control we haven't done any operation to it. But we have set the B spline to fit in the right spot. So the B spline is set to the correct resolution that matches our crop. Now in the matte control, all you want to do is just change the combined operation. That's it. So change this instead of saying combine to combine alpha, which just copies the alpha channel into the image. And it looks funky, it looks weird. It's actually called an unpre-multiplied image. We do not want to check post-multiplied image here for patch replacer to work. We're going to leave that unchecked, right? We're going to multiply it after we've done the patch replacer. Now we can move on to the patch replacer. It's really simple to use now that you've got this set up. I'm going to zoom out so you can make sure you can see the flow. On the patch replacer tool itself, you can see we've got a, where's it going from? Where's it going to? What's going right there? Well, let's take a look at the results of the patch replacer by just flicking it up into the viewer. And you can see right away we're seeing a pretty good result. We're taking pixels from this side of the vehicle to over there. Now if I go too close to it, you can start to see it's starting to copy and repeat over on itself. If I go a little bit further, you can see I'm getting that part of the car. But the nice thing I've seen this un-premultiplied view is I can see other areas of the vehicle without even doing any extra merging or whatever to sort of get a preview of what this patch is going to look like. Hey, quick side note, the patch replacer tool is actually a studio-only feature. So if you don't see it or if it's watermark, that's why. The other thing is there is actually two inputs. There's a yellow and a green input on this. I'm not going to mess with the green input today. I'm just going to be using the yellow background source input. But you can use a different source image or source color and blend the textures together too, which is really, really cool. Let me know if that's something that really interests you. It'll either be part of my VFX compositing course or another YouTube tutorial. But let's just move on forward and go ahead and multiply this image out so we can move to the next step. So I'm going to zoom out just a little bit further. I'll move these nodes on over to the side. Just select all those. And after the patch replacer is when we do the premultiplication. So Shift Space, the tool that will do this for us is called Alpha Multiply. There it is. AMI. Return to add this into the flow. And as soon as I add this into here, you'll see this is what actually cuts it out. It basically considers the RGB pixels and multiplies those by the alpha that was in that B-spine. So you'll see we've got edges that are going to work nice when they get composited back on top of the original image. And actually, let's go ahead and do that real quick. And then we'll take care of the one thing that I know you're thinking about. What about that edge, that line that was on the car? So to merge this on top, we'll just do the good old classic Shift Space MRG to get our merge node. We'll take the output of the Cineon Log. So we've got the full size image. Stick this into the background of the merge. In fact, let's take an elbow connector, a little dot connector option or alt. We'll give us one of those to try to stay organized. I'll move this down here towards the end of the flow. Let's move our output of our Cineon Log down there. And we'll take the output of the crop, which is all of our paint work or cleanup work into the merge. And I'll replace this so that now if we take a look at this merge, you can see we have a patch, but it didn't move anymore. So a couple more things to take care of. We need to add the motion back in, right? So remember at the beginning, we did a planar tracker that was set to steady. Well, this also has an invert steady checkbox, which we can use to reapply the original motion. So the way that works is I'm going to, again, give myself a little bit more room. This is a very linear sort of node flow. I'm going to take the planar tracker, command C to make a copy of it, after the alpha multiply, command V, and on this state of the image, I'm going to click the invert steady checkbox, which you'll notice if I load this up into the viewer, this is now making my patch move again. So it was static. The invert steady is what allows us to make it move again. This uncrop node is going to set it back to the canvas. This merge is going to show us the results of that with everything except for that little line that we're going to deal with the roto in just a sec. But I want to point out the power of this patch replacer because if you select this and you change the fill in method to not be blend clone and choose just clone, this is what that looks like. This is very similar to like a clone that's from Photoshop or even just the typical fusion paint brush without extra tricks on what that looks like. Those edges just don't blend good. The textures don't blend. It sticks out like a sore thumb. So that's where the power of this tool really comes in and the speed of it too. So I'll change that back to blended clone and we'll look at rotoscoping this little line that's on the edge of the car next. Stenciled alphas. So the way I think is the easiest way to deal with making a little rotoscope to fill in this original line. If we look at this image here, let's see, let's move this back out. We see we got the edge line of that car. It's actually before we actually start to move the shape again while it's still stabilized. So like in this state of the image, we're just going to add a little line in here that stencils that out. How do we do that? Well, we can do that with a merge node. So if I add a shift space merge, MRG, after the alpha multiply, so after this state, we can insert a polygon on here. And because we're looking at effectively a stabilized still image, we don't have to add any extra keyframes manually at all. But in order to draw the polygon, I do need to see where the line goes. So in that case, I will probably look back at the planar tracker results that's stabilized and maybe even draw it on frame zero to be consistent. So that I can actually see an image that's different from the node that I'm working on. So to grab a polygon tool, I'm just going to grab that from a toolbar over here, drag this down here into the flow. And on this polygon tool, I'm simply going to click a point that's on the line, click another point, and I'm going to leave this mask completely open. It's an open spline. You don't have to close a mask line infusion at all. You don't have to hit shift O every time you want to use it. Instead, what you can do is just increase the border width of it and that thickens it out. Now we don't see it and there's another thing I want to point out that we dealt with already and that's about the resolution. So if you pick and flick this into the viewer, we have this issue again where we're at 38, 40 by 2160, but I'm working in this crop section of it. So I need to manually change this polygon size to fit our crop, which is what gives us that giant performance boost that we've already talked about. So I'm going to load planar tracker just so I have reference of what resolution I'm setting this polygon to. On the polygon, I'm going to image tab, output size, custom, uncheck, frame format settings, and now I just can manually type in 1331 by 872. And that's coming from, again, the crop resolution. Yours is always or 872. Yours will always be different based on how you drew out your initial crop and you're kind of locked into that crop size when you start. So make sure you do cover enough pixels. I will point out as well. But now you can see it's in the correct position. It's probably way too thick, but we'll deal with the size of that in just a moment. Also with the polygon tool under controls, it's set for animation. So I will right click and say remove polygon one polyline so I don't accidentally nudge it to use this as a stencil with a merge. I'm going to take a look at here so you can see what's going to happen. So I'm going to cut a slice out of this, the line of this patch. And I'm going to do that by going into the foreground of the merge. Again, this is another one of those where we've got a mask input. So it's going to want to connect to that blue mask input, which is not how I want to use it. I want to use the merge this time with the operation mode set to stencil to sort of stencil and cut that section out. And you'll should see, let's load the merge into there. It's cut out that section way too fat and big for this instance right here. But this is where you sort of set it up and then you can refine it looking downstream of there. So if I look at downstream of here, like at the final merge where we're looking at it, it comps back over with the motion and all that. We can take a look at this polygon or this polygon right here, change the border with size and just slightly increase. I'm dragging the number field over here. And if you want to actually hold command while you do this, you can drag and hold this until you start to see that line reappear. So now if we were to look at this one, you'll see we've cut that out and it's just a really faint line. But the nice thing about doing it by looking at the final result is you see how it will look when it's finally done. So it's getting the motion applied because that's coming before the planar tracker here, the second one that's doing the invert steady transform. And that's basically it. That's the comp. So if we take a look closer, maybe it does need a little bit more adjustment. Actually, let's command drag this out just a little bit more so you can see. And if I were to disable this command P, that just basically put those pixels back into place. Now for a quick before and after comparison and then a quick color grade, I'm going to come up here to my buffer split wipe. So right here in the upper left, change this to buffer split wipe. And when you do that, you basically have two viewers in here. So this is the A side is our after I'm looking at the final merge down here. If I want to look at the before I could just load the Cineon log tool, the first one in our flow to sort of see where we came from can zoom in real close. In fact, this is where I might hit Q to see everything nice and large. And I can inspect this for any issues that may have appeared along edges and that sort of stuff. And I'm going to say this is in pretty good shape. So there's not much else I need to worry about doing. So you want to take one last look at the nodes, I'm going to make these as large as I can. So you can make sure you can sort of copy and paste this and use this in your own project. The main thing that's important with the patch replacer is that use mat control without pulse multiplying. So that when you use the patch replacer, you can use this in the fill in mode blend code using the region shape alpha channel. I know it's a lot of jargon, but once you get used to this flow, you'll notice how fast it is. So if I go to the edit page, and I start playing, you can see it's real time. And in fact, I got this playing real time on a base level M4 Mac mini, just the base level like a $500 computer. That's one reason I like the patch replacer is really GPU performance. Now if I want to see this with color and contrast, color page, shift space, color space transform, it's a great way to add tools now in DaVinci Resolve 20.1. Input color space is Sony. So we'll come down to input color space Sony do do do do. S gamma three Cine input gamma was S log three. You can see we've restored the entire image back to the original log. So the color grading can do whatever they want to the image output color space is going to be 709 709. And we'll let the rest of this do what it wants to do. Now the idea with color grading shift space, you do all your color grading before this final output. So the main thing I might do in this instance is just increase the exposure. But it's just important if you're new to color grading is you do all your work on the largest color space first. You don't necessarily need to do a CST sandwich over here in DaVinci wide gamut. The main thing is you go from what was shot, where state you're in to the final output. Here's a before and after over here. We've removed that really nice and clean using the patch replacer tool. Hey, thanks for hanging out with me today. My name is Chadwick. I'm a DaVinci Resolve master trainer of finishing artists here in New York. But I appreciate you just hanging out with me today. This has been a lot of fun. And because there's so much more to learn, I'll see you in the next video.
