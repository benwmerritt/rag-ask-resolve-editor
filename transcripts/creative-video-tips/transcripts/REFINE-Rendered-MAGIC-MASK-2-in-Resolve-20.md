---
title: "REFINE Rendered MAGIC MASK 2 in Resolve 20"
video_id: PWquFhwi6ks
channel: CreativeVideoTips
url: https://youtube.com/watch?v=PWquFhwi6ks
duration_seconds: 1411.0
date_processed: 2025-11-03
---

## Transcript
Recently, I shared how you can save Magic Mask 2 in DaVinci Resolve 20 by taking the blue mask output from the Magic Mask node to the green RGB output of the color page, then back on the edit page, re-render the mask in place so we never have to retrac Magic Mask in future versions. But today, let's dive further in Fusion and learn how to really refine the rendered Magic Mask and fix bad edges and just give that AI-generated mask some of your personal manual artist touch. Chapters are marked. Step one, slap comp. I generated out some different images here to use as different backgrounds, but I want to show you how you can combine these quickly in Fusion. If you just want to do that without any of the extra refinement, what I'll do, because I already rendered this out. This is a ProRes file. I don't need this on my timeline anymore. I want to get back to my native color pixels. I will right click on my clip. I'll say decompose to original, and then I'm going to right click again and say remove attributes because it's black because it's showing an un-rendered Magic Mask. Hit apply, and now we can go into Fusion and try out some of these different backgrounds and sort of see how these might work rather than having this shed in the background. That's what I thought would be fun to do today. So we're going to Fusion, and once we open up Fusion, I'm working mid-flow vertical to the top-down layout under workspaces if you want to do that. I always need to bring my media down below, so I'm working top-down. I need to go to my media pool. Just click that to one to grab our background images in. So I've got three of those that I'm pulling in. So media in two, three, and four look like this, this, and this. And all of this footage is going to be available on Cutting Club if you join. It's a great way to support the channel. Nonetheless, I need to pull in my Roto, the rendered out Magic Mask shot, right? And that's under my renders folder right here. So here's my rendered out Roto. How do I apply this to the footage so I can comp one over the other? Well, the idea is to comp in Fusion, you just merge what you want on top over what you want behind. So you take the output of what you want on top, okay? This is the output of what I want on top over what I want behind and just kiss these two outputs, and that will actually automatically generate a merge. So the point of these nodes is the color matters, the position doesn't really matter. So yellow means background, greens foreground. Here's the comp, but it has no mask, it doesn't know what to cut out yet. That's kind of the point of this guy right here. But there's no mask generated, or there's no alpha channel generated out of this when you render as ProRes 4.2.2, which is what I like to do. But we can generate the alpha really easily using a tool that's called Bitmap. So let's do that. I'm going to move this up out of the way. I'm going to add a tool called Bitmap with Shift Space. And the Bitmap tool also has a mask input. So just be careful how you connect this. I'm going to take the output of the rendered out magic mask, stick this into the yellow background of Bitmap. And once I do this, nothing really happens. I pick and flick to load it into the viewer. The reason why is the channel is really key to how you set this up. So I want to make sure the channel here is set to luminance. And now we actually have an alpha channel, I can stick this directly into the merge, and there we go. We have a slap comp. If we take the output of merge, go back to media out, go to the edit page and say, oh, we're done. Here's our before, shift D. Here's our after. But we have so, so much more we can do to this and make this really, really nice and refine the mask. Core mask and edge mask. Originally, if we take a look at just our mask over here, this Bitmap tool, want to point something out, we don't actually have a real solid mask to begin with. And the tool that's going to be really helpful for us in discovering this sort of stuff, if you open up the sub view menu, which you can hit with the V Victor key, and then come up here and change this to the color inspector. What happens here is the actual coordinate of the pixel that the cursor is sitting on tells you the code value there in the upper left. So 0.99805 is what I have in the center of this mask here. And that's not fully opaque. That means there's actually some transparency that's going to happen. When we view this merge with stuff, if there was stuff that was different underneath, we're actually going to see some of that image underneath. We don't want that we want to fill that in with a core mat that's solid, but actually still retain all the detail of some of the edge, you know, on the beard and that sort of thing here. So the way we do this is we end up using two different masks, and we merge those together. So we combine those two and get the best at both worlds. I'm going to take a copy of this bitmap tool. The only thing we've changed about it is just we've made it look at the luminance of the rendered out magic mask. I'll take a copy of it. So command C, click command V. And on this version of it, we're going to make the core mat. Okay, so on this one over here, in fact, let's rename it, I'll hit function F2, and just call this one core or hard mat. It's got lots of different names. But on this one, what I will do to firm up the inside of here is you can come over here to the inspector and sort of double click in this high value, and then move your cursor so you can change the value in the inspector while your cursor is parked over the image. So to change it, I'm using the arrow keys on the keyboard left, right, up, down. And then you can also add numbers with the number pad, which is what I'm doing here. So I need to decrease this until my alpha value hits one. There it goes. It hit one right around, somewhere around there. So that is filled out. This is completely solid right here. The other thing to know is if you don't have your clip black and click white checked, you'll start sending this over one. So it's a good idea. You see it's red. It's 1.00035. It's a good idea to generally keep these checked, especially when you're working on alpha channel manipulations. The other thing is we want to suck this in and firm up anything that is sort of flickering and gray, you know, anything that's out here. There may be some values. In fact, you see right here, if I come here, there's stuff hidden behind the scenes that you're not aware of. See that alpha value is 0.00354. We can't see that, but we do have a tool that lets us see this a little bit better. And that's called the gain and gamma slider. I have it open up down here. But if you don't, just the shortcut way to actually see your gain and gamma slider is to hold this button. This is your view lot right here. And that'll be turned on automatically if you have color management turned on, which I do. So we're working in linear, but you just turn up the gamma on this. So this is called gamma slamming. So we can actually see what's actually happening. They're a little bit better on any sort of view. It's not changing the image. It's just giving us a better way of viewing that. So you can see indeed, there's actually alpha values here that I probably don't want that were from the AI rendered mask. So to clean those up, we can take this core mat. We're going to do this in a couple ways. First on the core mat, I'm going to take the low value, which is what represents that black area. And I will just choke that in. And I don't need to necessarily have my cursor over here while I'm doing this. This is just more crude. And I'm going to pull this in. So this one, this core mat is going to sit inside the edge mat. So I've got two mats here. So this one should be pretty hard with no feathering between the two. In fact, I will just bring this down even further to try to get this. So we're going straight from one to zero, something like that. So up here, there's actually some funny business going on where there's some transparency coming on. So then remember the right side's affecting the white side of the image. And the left side is affecting the black side. So I've sort of firmed up that area that I had a little bit of a hole on that part of my shirt. So here's the core mat. Here's the soft mat. But in order to combine these, generally you want to shrink the core mat in a little bit. So we're going to use a tool that's called a road dilate, shift space, a road dilate, take this into the background of a road dilate. And what this is going to do is it's going to just shrink this in. You can see it's pulling those edges in a little bit further so that it can fit nicely, snugly inside of the edges. We're preserving those edges. And we'll also blur this as well. So shift space blur. We'll give a nice little bit of a soft fall off. Maybe you don't need the full value of one. And the other thing on all these nodes, I think this gives you a little bit better performance boost. I turn off, if I'm only working on an alpha in the inspector, I turn off everything except for the alpha channel. So I'm not processing extra channels and pixels. Maybe it's not necessary. But I think it's helpful. So the idea is here is my core mat, right? You can see this one is real solid. The edges are not very soft or detailed, but it fills in the solid center. And here's the edge mask, which is nice and soft, has that extra flicker there. I'm going to combine these. So how do you combine things in fusion? Use a merge shift space, MRG. First, I'll take the soft edge mask. I'll stick that into the yellow background of it. Okay, and then I will take the core mat, the hard core mat, stick this into the foreground, green foreground. And now we have a combined mask. Now we still have this edge stuff to deal with because it comes from the original one, but we're going to deal with that. And the next step where we can control things using the color curves to sculpt to that edge a little bit better. So now we're getting a little bit further, we're getting a little bit better. Let's take this and stick this into our slap comp. I'll bring my gamma slider back to where it was. And you can see if we look at this before we had added this core mat to it, you can see we filled in those edges. So step two, we're looking pretty good. Color curves. I'm going to show you here you can color correct the edge to sculpt it using the curves tool to get rid of any of this extra flicker. So if I load the merge to into the viewer, I hit a for alpha, we bring our gamma slider up, you can see we still have quite a bit of that extra garbage there, we can clean this up a little bit further. And a curves tool is a great way to do it because it's really, really controllable. So I'm going to hit shift space, start typing curves, and make sure you grab color curves, not hue curves. I'll take the output of the merge tool, stick this into the yellow background of curves. And once this is loaded up into the viewer, I'm going to work on alpha only. Remember, we're just working on masks today. So I'm disabling the red, the green, the blue. And I'm going to pin a point right at point five right at the center gamma point. So that I'm not really adjusting that too much. So I'm going to just click somewhere right there in the middle. And then I'll come back down here to the my in, set that to point five, my out to point five. There we go, they're both at point five. And the nice thing about the curves tool is we have the ability if you select if you click in the middle of here and then lasso select this point, we have the ability of using some shortcut keys to flatten them out. So if I hit F to flatten, it kind of sculpted that edge. You see what just happened there? See that junk that went away without me even changing any other values other than putting a little bit of curve onto it, it cleaned that up. And I can do that on both ends if I need to. So if I want to take the other side of it, hit F to flatten, we can see what that does. We don't, doesn't seem to be doing too much. So I might just actually take this low end. And the other thing that's nice to know if you select this and just drag this number, we can really, really see how we're affecting that edge to get rid of any of that extra flicker that may exist in the alpha channel, as well as just point this one out as a tip. If you open the spline editor down here, select the alpha, zoom to fit, you can do this in a much, much larger view as well down here, where you have the ability to select a point, hit T for transition. Let's do the zoom to fit. And you can drag this ease in and ease out value right here, which can really, really refine how you're sort of sculpting that edge. But that's enough of that. Let's take a look at what the result is. Now that we've cleaned that up even further there with a little bit of a lookup table or the color curves tool. I'll close the spine. Rather than taking the output of this soft comp hard comp thing, let's take the output of this color curves result. Remember, that's where we came from. That's where we just went. Let's take the output of here, stick this into the mask input of our merge. So here's our result before adding the color curves. And here it is after. You can see we've cleaned that up quite a bit. If we take a look at it in the merge and bring our gamma back down to earth, we can see we've cleaned that up quite a bit. So we have a much, much cleaner edge. Combine real foreground. Now what I'd like to do in this image here, I'm going to hit command F, control F to see the whole image. I actually want to take some of the original slope here and just use the background as an I said extension. So how do we combine a separate mask into this? Well, it's really simple. We're just going to do that kind of like you did with the Cormat and the edge mask. We're going to do that with a separate merge. So I'm going to take another mask tool, which is this time I'm going to grab the polygon tool up here. And while looking at my media in one, I'm going to draw out the slope of this hill here in my backyard. So I can get rid of this shed. I don't want that shed. I want to be out in the mountains, right? So I'm going to click a point here with the polygon tool. I always like to draw polygons and stuff disconnected at first so I can see whatever image I'm actually trying to work on. And I'm just clicking points. If you drag, it makes it like a smooth point somewhere along the grass line there. So that I'm going to feather this thing out and combine it with the magic mask result. Shift O will close the mask. So that's a good shortcut to know when you're using these masks. So I've got this mask here that we've refined. I've got this mask here. How do you think we add these together? You guessed it. It's another merge. So I'm going to hit shift space, MRG. So you can do the kissing the output part too. I just want to show you the different ways. I'll take the output of the color curves tool, that part of that mask, into here. And I'll take this output, this polygon, stick this into the foreground. And we saw actually this will happen sometimes. It'll go into the mask input because it is a mask. We don't want to do that. I actually want this to go into the green foreground. So once it's done that, you can see that mask is combined. We probably need to feather off the edge of that, which is not going to be an issue. But just command F real quick to show you how this will combine into our slap comp here is we just rather than taking the output of just me, I take the output from here instead. So disconnect that, take this as our mask that's going into the merge and see I've got the original foreground that's down here, that hill. But I'm using that new background. It looks pretty fake right now. But we can really simplify this and get this to blend much nicer by just on the polygon tool itself. If you select that, there's like a feathering tool that's built in. That's kind of global. And we'll just allow you to if you just actually let's do this by turning off the controls so you can see what's actually happening. You can do that up here by going to show controls. And this is a really important one to enable again once you turn it off because you'll forget and you'll think your mask are broken. Command K is the shortcut. But essentially I'm still able to adjust this but I can see the result of it without that green line being in the way. So something like this is actually blending pretty nicely, I would say. The other thing to be aware of with polygons when you draw them, they're ready to be rotoscoped. In fact, you see over here, right click for shape animation. Generally when I draw something, unless I know I'm going to animate it, I come over here and I right click on the word that says right click and I say remove polygon polyline. So that way if I want to manipulate this with show controls back on, I can come over here, I can alt or option drag that point to make any sort of tweaks on how that mask is coming through from my original foreground to this new background. So command F, I'll deselect that mask and you can see I've been able to easily add in that original background. Here's the alpha channel we're looking at now. Edge Mask Blur. So this one is an actual polished step that you're never going to find in another YouTube tutorial that I've seen. But essentially if you take a look at our comp right here and we look at these edges here, you'll see there's sort of like a little black edge. It's clearly not integrated into the scene all that great. And one of the tricks to blend it better is to after you've actually composited it like we have here is to just blur the edge and just blur the edge only. But you blur the whole composite. You don't blur beforehand. So the idea is I'm pulling pixels from this background and from the foreground together and I'll show you what that looks like. So I'm selecting merge, hitting shift space, blur, just a standard blur tool should work just fine. And if you take a look at the results of this and keep an eye on that shoulder there, you can see now all of a sudden this blends really nice. It did create another issue is I've blurred the entire image. So this is going to be my custom edge mask setup so that we can limit this to just the area that we need to blend the new background with the original foreground. All right. So here's how we're going to do that. I am going to take the output of this mask right here, which we're pretty happy with, right? Doing all right. And I'm going to make an edge mask from this. So if I hit command f so you can see the whole thing, the idea here is first I'm going to blur that edge mask. This is the trick. Blur first. And we'll do this off to the side because we're essentially building an edge mask that's separate from the mask that's doing the compositing. So this one's just going to blur those edges just a little bit. You know, maybe even doesn't even need that much, maybe something like 0.5. And then I'm going to make use of another curves tool to really precisely grab the semi transparent edge right here. Okay. Since we're working just on a mask, again, a good idea to turn off your RGB. And then we'll add another curves tool. So color curves, this color curves tool, again, just working on the alpha. And to build the edge mask out, I'm going to take the output of this blur into my background of the color curves on the color curves, the way we can extract just a custom edge mask out of it, kind of like before, I'm going to select a point right at 0.5. I'll actually type it in 0.5. But the output, bring that all the way up to one. And then on the far right side, we're going to actually drop that output down to zero. And then here's the secret to this. If you hit S here for smooth and S and S, what we've just done is given ourselves the ability to sculpt the inside and outside edge really, really precisely. This blur here is also going to control this as well. So you can see how nice this is probably my favorite way of making an edge mask. So we can really, really, you know, hone that in. So if we were to take this output and stick this into the blur mask input, so here's our blur right now, we're blurring everything. The idea here is, what if we masked off the blur, so it only was hitting the edges, right? So you can see now, if I saw this before, Command P turns it off and on, we've nicely blurred just those edges. But there's one more thing here that I'm missing. And that's the fact that I'm actually, this is not a composite, this bottom part, that's the actual real foreground. I want to stencil out this. So we're going to do this with another merge node to interact and combine masks. So I'm grabbing another merge, MRG. And this merge is going to take our edge mask. Okay, there's our nice edge mask. I'm going to take the output of this guy. And actually, again, there's all this sort of stuff, turn off RGB. I don't know, maybe a developer will tell me, I don't need to do that, but I want to make things as fast as possible. So I generally do that when I just work on masks, but take the output of the curves, stick this into the merge. And the other thing that I want to pay attention to is I want to subtract the area that I don't need mass, the area I don't need mask was this manual shape that we had drawn out with the polygon tool. This is the beauty of nodes, right? I'm going to take the output of this polygon mask into the foreground here, merge. And it's not doing quite what I want initially, because it's just putting one over the other. But what you can do is you can change the the operator over here, instead of being over, you can change this to something like stencil. And essentially, what that did is it just made a stencil, it just cut out. So I just have that part that's going to get the blur that I want in this tool over here. So rather than taking the full body to blur, what I'm going to do with this is I'm going to just take this shoulder region, this top head region to blur that in the composite. And so you can see, if I turn this before and after command P command, to turn that on and off, I'm not affecting this edge here, but it really, really helps turned on up there on that top part to get rid of that black edge. And really just it pulls the color pixels all along. So let me hit command F and you can sort of see what we're looking at there. And the nice thing about all this is it's really dynamic. Once you set this mask up, you can go in and say your client wanted this background instead, I can just come over here, take the output of here, stick this into the merge. And let's look at the output of the blur, you know, I've got a result with that background. What if we want to use this background, this mountain shot instead, just take this stick this into the background, load this into the viewer. I've changed the background once again. So you can see it's really, really flexible, but there's more we can do to this to sell it even further. And we're going to look at that next. Film look creator grain. The Vitru resolve has a great grain generator tool that's on the color page as part of their film look creator. If you haven't noticed the image I'm working with to composite with this right here is denoised already. So there's not a lot of flicker in it. It's already taken care of. And the still images obviously have no movement, no grain. So we're going to add film look creator grain. I think I like this image the most. So we're going to go with this as our final we'll go to the color page, add this extra polish, we'll go to effects. I'm going to search for it. We'll call this one film look creator, drag it onto the node. And as soon as I do that, I'm going to turn this to clean slate. And then just come down here. If you hit shift F, you get a nice tall inspector over here. I like to have that because I have a low resolution monitor right now. I'm going to change this to grain, enable grain. I'll maybe make this 16 millimeter because this is for YouTube to make it really, really obvious what's happening. And you can see if I do this scroll in here. That looks like I'm pretty well integrated into this fake background set extension all from the simple rendered out magic mass from the edit page. Back on the edit page, this is the final result. If I pause and I hit shift D, you'll see the before. Looks like I pretty nicely manipulated that magic mass to work with. Now, my name is Chadwick. I super appreciate you. This is creative video tips. This footage is actually available for you to download and start to play along with and learn how to combine mass by joining the cutting club. Go to creativevideotips.com slash cutting club. You'll not only get access to this clip, but a lot more for all my free YouTube tutorials. And because there's so much more to learn, I'll see you in the next video.
