---
title: "Combine A.I. & Manual Masks TOGETHER in Resolve"
video_id: zQLPPuK8TOE
channel: CreativeVideoTips
url: https://youtube.com/watch?v=zQLPPuK8TOE
duration_seconds: 1377.0
date_processed: 2025-11-03
---

## Transcript
Today, I want to help you level up your DaVinci Resolve masking skills for blurring a face behind a foreground occlusion and tracking the mask off screen on kind of a tough real-world shot. You're going to learn how to perform stabilized rotoscoping, gradient extrapolation of motion tracking data, and how to also combine an AI magic mask with a manual roto shape. Here's the shot we're working with today. It's a woman sitting in front of a bench at the Harlem station and a dude walks right in front of her. I need to blur her face, but I don't want to blur the guy walking in front. So to get started in Fusion on a source clip at source resolution, just simply park the playhead over the clip, click the Fusion button, and you're in there ready to start comping. Now, I don't like this layout. I'll tell you, at every single tutorial, I'm going to go to Workspace, Layout Presets, and change this Fusion Preset to Midflow Vertical. And that lets me do my nodes top to bottom and have a big viewer on the left side. Now, I only want the one viewer, or actually, it's the two viewer, this one down here. So I'm just going to click the one that I want by clicking this button here, fills it up nice and big. And then also, I want to just change this layout here. So I'm taking my media out to the bottom, dragging that down to the bottom. And you'll notice I also have a thumbnail of my image. If that's new to you, this is just a nice way of seeing what your sources are. And you can get that by right clicking anywhere in the flow, and going to check the box for force source tile pictures. Now, to see a node in the viewer, you just pick and flick to load it. So if I want to see my media in here, instead of my, you can see right now, it's my media out, you just drag your node, click hard, and just hold down on your mouse or your pen, and release it when you're on the viewer. And you'll see it's just changed to media in one. It's really important that you get in the habit of loading the node that you want to see when you're adjusting it. So the first node we're going to add is the tracker node in here. I'm going to hit Shift Space, and that'll open up my select tool picker, which is basically all your effects that are in Fusion. So we're going to load the tracker, just start typing t r a return, and then I'll add it right after in the flow. So we've got a yellow pipe going right into the tracker node. And the difference or a big difference between doing a polygon roto shape on the Fusion page versus the color page, is you can do your tracking totally separate from drawing your mask in Fusion. And I'm actually going to start with doing my tracking first, because I'm going to try to get the computer to do as much of the hard work and as much of the most accurate sub pixel work as possible. That is not as easy to do in the color page. So with this tracker one added to the flow, I'm going to load it into my viewer again, we pick and flick, you can see now we're looking at the results of the tracker. And I'll tell you, I've already tested this, there's two types of point trackers built in here. One is the IntelliTrack, which is the default in DaVinci Resolve Studio. It does not work great on this shot. So I'm going to go old school on you. And we're going to use the old point tracker instead. So if you click this button over here, this is a pattern based contrast based tracker instead of this AI based IntelliTrack. Yes, we're going to use AI in this video, we're going to use magic mask, but I'm going to get rid of the IntelliTrack because it just doesn't work. It's sometimes it works wonders, sometimes it's terrible. So it's great, we have options. Now to move this point tracker over here, we've got this upper left button, okay, or upper left a little icon when it goes white on you, then you can pick and reposition it. So on this, I'm on frame 60, I'm going to drag this over her face, actually, I'm going to drag it over her, maybe her nostril or something like that. And I'm going to expand it just a little bit bigger in this inner box, see that hard line inner box, that's the area that DaVinci Resolve is going to kind of memorize and use to match frame over frame over frame at a sub pixel level. Now the outer box, this dash line is the search box that it's going to look for to match if it loses track of what's on the inside there. Okay, so basically, it's a search area and a pattern region, the middle parts, what's really going to match, we're going to leave everything as default here. And if it goes haywire, I'm going to show you how to fix it. So the adaptive mode is set to none. And we're going to track forward. Now the nice thing about the newer tracker and DaVinci Resolve that have maybe not shown before, you can do this frame by frame, which is a good way to sort of babysit it and make sure it's really, really accurate. So I'm going to track right one frame at a time using this button right here that has this vertical line on it. And with looking at it, I'll hit it one time, and we'll get a preview as it goes. And it's going to create a displacement path that follows that nose and we'll be able to see if it goes off at all at any point. And it looks like we're doing good so far. And we're slipping off a little bit. So if you ever start to feel like you're sort of slipping off the nose a little bit, you can always take this box and say, I want to reposition that here, and get that back into spot where it was. So that box is always where the tracking data is going to be looking for to make this green line that is going to be our motion path that we can attach and use to do a stabilized rotoscope, which we're getting to in the next section. Okay, so the reason I'm going frame by frame is I really want to check it as it goes, because I care about precision when I'm on the Fusion page, not necessarily speed. So the color page is great for speed. This is really good for accuracy. Okay, we've almost got her to where she's going off screen. And right before she goes off screen, I'm going to go the other direction where there's the occlusion. And I'll show you how we work with that. And then we'll get her off screen. Right. So at that point, we can see I got a bad track data. So if I use the bracket keys to go back to previous keyframes, we start to get a bad frame there that last one there is no good. So what I'll do to remove bad tracking data, open the spline editor. And then if you click this displacement curve, you've got a zoom to fit button. Basically, it was right there at that keyframe, that's not in the right position. So I just thought box selected in the spline editor, hit the delete button, and the bad data is gone. Okay, so so far, our path is looking really nice and smooth, we're going to be able to attach a polygon a B spline to this easily. Now I need to go the other direction with it. Okay, how am I going to get across this dude? Well, let's get closer to them first, because we do have some some frames here that are going to work just fine. So I'm going to track with this backwards button. Oh, it didn't even work at all on that frame. So if I go back to you'll see I had immediately I had two really bad frames that did not track correctly. So I will just come up here. That one's fine. That one's fine. But I will delete those with the spline editor open spline editor almost always needs to be open when you're doing tracking because you're going to always be deleting bad data. So maybe my issue here is I need to make my search area or my pattern area a little bit smaller. So I'm going to do that by just, you know, squeezing that in there a little bit. And I'll go left and that fixed it. So now we're staying on our nose, we're fixing this in real time, showing all the mistakes and how you can work through those. Okay, we actually look pretty good. It actually got through there. Now I can tell you, we're not going to get across this dude with the point tracker because it doesn't can't see any pixels. But what you can do is reposition the playhead, either here or in the spline editor until you can see that nostril again. So you can see that nose nostril. And then once you can, so right here at this point I can, by the way, I'm zooming in with command mouse wheel. Or if you have a Wacom's Wacom stylus, you can do the middle mouse left right drag method is what I'm using. Let's you get really close in really fast. I'm just going to reposition. So top left on here, moving this box again over her over her nostril, which is right there. And we'll see if we can pick up tracking on the other side. So if we look at my spline editor before I even do this, you'll notice there's a big flat line gap here. And just like on the color page, DaVinci Resolve can interpolate between these two keyframes as the track data is created. So from here, I'm going to hit the track backwards again, and see it's starting to write data. And it's as it goes across here, you'll see it just continues a straight path between these. In fact, you can change the curve on this if the timing wasn't quite right. But it looks pretty decent to me. So we're going to keep working to get her off screen. I'm going to keep tracking one frame at a time. And you see how you get that flash where you get that oops, there we go, bad track data, we're going to fix that. So that's why I'm going one frame at a time. It dipped down there. I'm going to use the magnifying glass on the spline editor down here, box select. And those ones are bad. So they get the delete button. So from here, I will just maybe position this a little bit differently like this, a little larger, maybe that will help. We'll find out. Yep, that did the trick. And we're still tracking that nostril, keep that nose on frame, and sorry, keep that to keep that nice smooth displacement path from the tracking data, till we get her almost up. And that's probably as far as I can get maybe I could delete this and get the pattern a little bit smaller to get just a little bit further off screen. So we'll try that. And then after this point, I'm going to show you the magic of gradient extrapolation. Okay, so I don't think that one, that last one did too good. So I will maybe just even delete those last two. Now, if I zoom to fit my spline, so you can see the whole spline, I'm going to hit command F in the viewer. We have a pretty nice path that goes all the way across screen. And you can see the gap where the dude walks in front is just interpolating between those two different keyframes. But we're not completely off screen, you see how the shot actually starts and ends completely off screen with her face. So the tool or one of the techniques that I like to do to get a tracking point completely off screen, it's called gradient extrapolation. The way that works, you just right click down here on the on the spline editor, you go up to this right here, gradient extrapolation. And what this does is it continues the speed and motion path of the last tracking frame on both ends of the spline to continue off screen. So the one thing I'm noticing is this end of the extrapolation worked good. You can see on that side, the point track move completely off. The other side, not so much. And I think this had to do so if I come over to this side, this side did not go off screen as I hoped it would. And that's because it kind of slowed down here towards the end. And so the easiest thing I can probably do is just delete these last two or three keyframes here. And the gradient extrapolation will continue moving off screen. Maybe I needed one more in there. So maybe I maybe I come over here and I get at least one more tracking keyframe. And grading extrapolation just takes those the end of the last keyframe and continues that motion path. Hey, real quick time out. If you want to follow along and use the same footage, sign up to support these free resolve YouTube tutorials at creativevideotips.com and join the cutting club. So we've got a great motion path. But the best way to actually draw a shape and do rotoscoping is to stabilize the footage and draw on the stabilized version of the footage. So how are we going to do that with this tracker tool? Well, actually, in reality, I use a free macro that you can get from Fusion Reactor to do the stabilization because I can choose any frame to stabilize on after the fact. So Fusion Reactor, if you're unaware, it's a great tool set of tools for Fusion of macros that you can get installed. You got a tutorial on it, you should probably watch it if you haven't seen it. But the tool that I love and currently use is from Milo Labs, and it's called the tracker tool. So I'm going to load that my flow, shift space, tracker, and you can see ML tracker tool, that's one we want. I'll click add. It'll just drop it down here. And again, you need to install this from Fusion Reactor, which is a built in set of tools you can get if you have DaVinci Resolve Studio. Now, I've got my media in, what does the tracker tool need? It needs footage. So I'm going to feed this a copy of my media in. And this is the great thing about nodes, you can send the same footage to multiple outputs, just like you can in the color page. Now, as soon as I load the tracker tool into the viewer, it turns red, it's angry. And the reason it's angry is because it needs some other information to process. What does it need? I'll click this and in the inspector, we have this clear set of parameters that we can use. And this tracker well right here is empty, it needs a tracker to work from. So if I click hard and drag just like I'm loading into the viewer and drag it across the inspector line and release it in this tracker well, it loads the tracker into that viewer, so that it's able to use the data from this tracker over here. And what I wanted to actually do is I want to stabilize this shot, but I don't want to stabilize it off of this default frame of 1001, I want to stabilize it maybe off of I don't know frame 70. And so if you just go to the frame you want to stabilize, it set reference frame after you've been tracked, this is the beauty of this tool, you can't choose the frame you want to stabilize after the fact with the built in tracker tool. So that's why this comes in really, really handy. So you can see if I play through here right around 70, her face is not moving, it's locked on stabilization, which makes it really, really easy to rotoscope. So I'm going to go to frame 70. And we're going to start rotoscoping, I like to use the B spline to rotoscope. So that is right up here. BSP. Basically, this is a polygon that has curved edges to it. So you don't have to do worry about your handle so much. So while looking at the stabilized footage, with the B spline selected, but not connected, a selected but not connected, we can start drawing. So just click points around her face, like so. And if you want to close it up really easily without having to be so precise, hit shift O, and that'll close up the shape. Now, if you ever want to move an edge or a point and actually not have to worry about getting in there real precise, if you hold down the option or alt key, as long as you're closest to that point, it grabs that edge. So you don't have to be so close and get like, so carpal tunnel with your mouse or whatever. Now, the idea is with with the shapes and fusion is they're already set up for rotoscoping. You can see over here on the right side, it already has a key frame set. In fact, if I move off frame 70, you'll see the white tick down there. That means if I change the shape on another frame, it's going to interpolate that shape between frames, which is great. That's what we want. So I'm going to look for a frame where it looks like it kind of moves in a direction that we don't need it anymore. So maybe even like right here, we've got all this extra space here on the left side. So if I wanted to adjust that point, I could just, you know, select that point, make sure you're holding option, not control like I just did. And just you can tighten it up and you'll see it sort of changes that shape over time between those two. And the idea of the rotoscoping is you want the least number of key frames possible to maintain smooth edges. So if I get to here, we can see I've clearly the shape clearly is not on her face completely. So I might at this point, I might just lasso select a box, select all those hold option and reposition that oval or circle I've drawn over her face. And we'll see how it works out on the other side. So over here on the other side, looks like I got don't have enough over cheeks. So I might option drag that to reposition again. And it looks like it's covering pretty good right now. So at this point, I'm sure you're thinking great Chad, okay, I have a mask around something that's stabilized, but I actually need that mask to move. Well, it's really simple to just flop the operation now. So the ml tracker tool down here, instead of feeding it the original footage, we're going to feed it the shape that we drew. So the the B spline will go into that yellow input down there. And then we just need to change one more thing. And that's the mode instead of looking at the stabilized movement, we want to look at the match movement from the tracker. And it's just going to follow along, just like that. So if you want to quickly see what it would be like if we just use this without the magic mass, which we're getting to, you could just take the original footage, do a shift space, mosaic blur, and we'll blur the entire footage directly. Okay, so it blurs all the image. And we can just mask off so that the mosaic blur is only being masked off by that circle. And you can see it follows her exactly precisely. And we've used a lot of precision that we get from the tracker tool and the ml tracker tool, which let us reset our reference frame. But the issue you'll see here is it goes across in front of him, we're getting those pixelated blocks on the four ground element. And we don't want that. So we're going to use magic mass next to subtract it from this mask. To add a magic mask and fusion, I like to just click anywhere in the flow where I want it to drop. So I click first, then I hit shift space, type magic, magic mask, and magic mass needs an input. So great thing about nodes, we can take multiple outputs from the same source, you don't need to copy and paste your media. And in fact, I would recommend you never do that. So to actually see the results of magic mass, pick and flick, load it into the viewer over here. And it's got your little eyedropper ready for you to do a little swiping swiping and make a selection, not a bad selection to start. We'll see how this does. I'm going to change the mode over here to better which softens it out. And there's a track forward and backwards button. Now the part we really care about is the overlap when he goes over the top of her. So the other sections really don't matter so much. So don't be concerned with those. We're going to just see, is there separation from when he goes over the top of her face. So right there seems good. He seems excluded pretty much. Actually, that's a really good result right off the start. So I don't even have to do anything else. Now if you see don't see black here, that's just because I have a default set here to not show my checker underlay. But the idea is it is creating an alpha channel that is creating transparency. But the way I love to use magic mass infusion, in fact, I have a whole tutorial on how to save magic mask. If you've ever lost your magic mask after duplicating a sequence or something, you should check that out. But I like to explicitly tell myself I'm only using the alpha channel from it. So out of magic mask, I use another node called the bitmap node. And a bitmap node just makes sure they are only outputting an alpha channel from it. Okay, so after magic mask, I'm going to hit shift space, type in bitmap, and it connects it all wrong. So if you take a look here, it went into the mask input of magic mask. That's not what I want. I actually want to take the output of the magic mask and feed that into the input of the bitmap tool. Okay, by doing this, loading this into the viewer and making sure your channel here is set to alpha, it's going to basically just take alpha channel information out from here, so that we can combine this mass that we've created with magic mask, which is not the cleanest mask, but it's going to suffice for this for sure, with the ML tracker tool, which is that really nice clean circle that we use tracking data from from the point tracker, to combine a cutout so that the dude in front is not getting blurred. How do we do that? Well, we use another node and the node that you can combine mask and do all kinds of fancy stuff with is called the matte control node infusion. So I'm going to hit shift space, type in matte control. There it is. I'm going to disconnect. I'm going to unhook that right now. So here's our stabilized rotoscope spline, and we've got our magic mask spline. We're going to use the matte control to combine these two. How do we do that? Really, really simple. We're going to take the output of the B spline feed that directly into the background input of mat control. And then we'll take the output of the bitmap from the magic mask, the AI rotoscope version, and we'll plug that into the foreground of the mat control, load that into the viewer. And what we need to do is we need to change the combined operation. So we're going to do a combine, combine alpha, and then instead of saying copy, which just basically copies and replaces the foreground magic mask in the mat, we're going to do a subtraction. So it's going to subtract one mat from the other. It's going to take the B spline, subtract the magic mask, and this gives us this nice mask where you can see how it cuts away where that guy is going to walk in front of her. And that's really all there is to it. We have a great mask that we can use. We can even soften all this with other blur controls that are in the mat control. So it's blur only her face. Remember, we just take the original footage, look at the mosaic blur of it, we mask it off using the output of mat control going into this blue mask input of mosaic blur. And you can see we're masking off her face, but as soon as it goes over his arm, we're not blurring the occlusion at all. Right. If you want to make it more obvious, I can show you this with a color correct. So if I added a color correct, like I did in a previous tutorial about the color page, fed that into here, you can, you can in fact, let's disconnect our media from there and we'll come on down further. The color correct, maybe we want to just, I can show this more explicitly here. If I mask off the color correct, you can see as it comes across the shoulder, how that mat's working, it's excluding him. And so what we're doing is we're saying the magic mass is going to the foreground and that is subtracting from our manually done stabilized rotoscope that uses the ML tracker tool, pretty cool, right? All right, so to finish this out, let's get rid of the color corrector tool, we don't actually need that we just wanted to do the blur, we go straight back out to the media out. And you can see that over here on the edit page. Now stick around for a couple more seconds, I'm going to give you an extra tip here, if you didn't want to do the blur on the fusion page, but still wanted to use this mat that you make here on the fusion page, and maybe do the blur on the color page, it's actually really easy to do. I'm going to basically just get rid of that mosaic blur there. If you hit shift space, you can add a second media out. And the second media out can be fed that alpha channel directly, right? And this can be accessed directly on the color page. So if you wanted to do your blurring over there, you can the way you access this mat on the color page, go to the color page, right click anywhere, and we'll say add a source. A source is a second media out. So if I wanted to add the blur over here, maybe I would come over here and use this blurring tool, blur the whole image, and mask it off from that second alpha output. And you can see, there's our blur that we had gotten from the fusion page. So it skipped basically went straight from the color information from media in one, and the mask information from media out to now, if you found this video helpful, you'll also like the tutorial that's linked here to learn the tracking and masking secrets of the color page of the venture resolve with the often overlooked key mix node. Hey, I'm Chadwick, I really do appreciate you. And because there's so much more to learn, I'll see you in the next video.
